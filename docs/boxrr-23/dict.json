{
  "$id": "https://metaguard.github.io/xror/schema/v1.0.0/schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Extended Reality Open Recording (XROR)",
  "description": "A recording consisting of motion data and events generated by a virtual or augmented reality application.",
  "bsonType": "object",
  "properties": {
    "$id": {
      "bsonType": [
        "string",
        "integer",
        "uuid"
      ],
      "description": "A unique identifier for this recording."
    },
    "info": {
      "bsonType": "object",
      "description": "Metadata about this recording.",
      "properties": {
        "name": {
          "bsonType": "string",
          "description": "The name of this recording."
        },
        "timestamp": {
          "bsonType": "date",
          "description": "Unix timestamp for the start of this recording."
        },
        "hardware": {
          "bsonType": "object",
          "description": "Metadata about the hardware associated with this recording.",
          "properties": {
            "devices": {
              "bsonType": "array",
              "description": "The hardware devices associated with this recording.",
              "minItems": 1,
              "items": {
                "bsonType": "object",
                "properties": {
                  "name": {
                    "bsonType": "string",
                    "description": "The name of the hardware device."
                  },
                  "type": {
                    "bsonType": "string",
                    "description": "The type of the hardware device.",
                    "enum": [
                      "HMD",
                      "CONTROLLER",
                      "TRACKER",
                      "STYLUS",
                      "BODY",
                      "EYE",
                      "OTHER"
                    ]
                  },
                  "joint": {
                    "bsonType": "string",
                    "description": "The location of the hardware device on the user's body.",
                    "enum": [
                      "PELVIS",
                      "SPINE_NAVAL",
                      "SPINE_CHEST",
                      "NECK",
                      "CLAVICLE_LEFT",
                      "SHOULDER_LEFT",
                      "ELBOW_LEFT",
                      "WRIST_LEFT",
                      "HAND_LEFT",
                      "HANDTIP_LEFT",
                      "THUMB_LEFT",
                      "CLAVICLE_RIGHT",
                      "SHOULDER_RIGHT",
                      "ELBOW_RIGHT",
                      "WRIST_RIGHT",
                      "HAND_RIGHT",
                      "HANDTIP_RIGHT",
                      "THUMB_RIGHT",
                      "HIP_LEFT",
                      "KNEE_LEFT",
                      "ANKLE_LEFT",
                      "FOOT_LEFT",
                      "HIP_RIGHT",
                      "KNEE_RIGHT",
                      "ANKLE_RIGHT",
                      "FOOT_RIGHT",
                      "HEAD",
                      "NOSE",
                      "EYE_LEFT",
                      "EAR_LEFT",
                      "EYE_RIGHT",
                      "EAR_RIGHT",
                      "OTHER"
                    ]
                  },
                  "axes": {
                    "bsonType": "array",
                    "description": "The names of the tracked dimensions associated with this device.",
                    "minItems": 1,
                    "items": {
                      "bsonType": "string"
                    }
                  },
                  "offsets": {
                    "bsonType": "array",
                    "description": "The offsets of the tracked dimensions associated with this device relative to the origin.",
                    "items": {
                      "bsonType": "string"
                    }
                  }
                },
                "required": [
                  "axes"
                ]
              }
            }
          },
          "required": [
            "devices"
          ]
        },
        "software": {
          "bsonType": "object",
          "description": "Metadata about the software associated with this recording.",
          "properties": {
            "api": {
              "bsonType": "string",
              "description": "The API used by the application associated with this recording, such as OpenXR."
            },
            "runtime": {
              "bsonType": "string",
              "description": "The runtime environment associated with this recording, such as SteamVR."
            },
            "app": {
              "bsonType": "object",
              "description": "Metadata about the application associated with this recording.",
              "properties": {
                "id": {
                  "bsonType": [
                    "string",
                    "integer",
                    "uuid"
                  ],
                  "description": "A unique identifier for the application associated with this recording."
                },
                "name": {
                  "bsonType": "string",
                  "description": "The name of the application associated with this recording."
                },
                "version": {
                  "bsonType": "string",
                  "description": "The version number of the application associated with this recording."
                },
                "extensions": {
                  "bsonType": "array",
                  "description": "Metadata about extensions to the application associated with this recording.",
                  "items": {
                    "bsonType": "object"
                  },
                  "properties": {
                    "id": {
                      "bsonType": [
                        "string",
                        "integer",
                        "uuid"
                      ],
                      "description": "A unique identifier for the extension."
                    },
                    "name": {
                      "bsonType": "string",
                      "description": "The name of the extension."
                    },
                    "version": {
                      "bsonType": "string",
                      "description": "The version number of the extension."
                    }
                  }
                }
              }
            },
            "environment": {
              "bsonType": "object",
              "description": "Metadata about the virtual environment associated with this recording.",
              "properties": {
                "id": {
                  "bsonType": [
                    "string",
                    "integer",
                    "uuid"
                  ],
                  "description": "A unique identifier for the environment associated with this recording."
                },
                "name": {
                  "bsonType": "string",
                  "description": "The name of the virtual environment associated with this recording."
                }
              }
            },
            "activity": {
              "bsonType": "object",
              "description": "Metadata about the activity associated with this recording.",
              "properties": {
                "id": {
                  "bsonType": [
                    "string",
                    "integer",
                    "uuid"
                  ],
                  "description": "A unique identifier for the activity associated with this recording."
                },
                "name": {
                  "bsonType": "string",
                  "description": "The name of the activity associated with this recording."
                }
              }
            }
          }
        },
        "user": {
          "bsonType": "object",
          "description": "Metadata about the user associated with this recording.",
          "properties": {
            "id": {
              "bsonType": [
                "string",
                "integer",
                "uuid"
              ],
              "description": "A unique identifier for the user associated with this recording."
            },
            "name": {
              "bsonType": "string",
              "description": "The name of the user associated with this recording."
            }
          }
        }
      },
      "required": [
        "hardware"
      ]
    },
    "frames": {
      "bsonType": "binData",
      "description": "The sequence of telemetry data frames comprising this recording; consists of a fpzip-compressed 2D array of floats, with one entry per frame. Each entry starts with the time of the frame in seconds elapsed since the start of the recording, and then includes the telemetry data associated with the frame, with one number for each tracked axis specified in devices.",
    },
    "events": {
      "bsonType": "array",
      "description": "A sequence of events contained in this recording.",
      "items": {
        "bsonType": "object"
      },
      "properties": {
        "id": {
          "bsonType": "string",
          "description": "A unique identifier for the type of event."
        },
        "name": {
          "bsonType": "string",
          "description": "The name of the type of event."
        },
        "attr": {
          "bsonType": "array",
          "description": "The names of the attributes associated with this type of event. Lists all floating-point attributes first, followed by all other attributes.",
          "items": {
            "bsonType": "string"
          }
        },
        "floatData": {
          "bsonType": "object",
          "bsonType": "binData",
          "description": "The occurrences of the event type contained in this recording; consists of a fpzip-compressed 2D array of floats, with one entry per occurrence. Each entry starts with the time of the event in seconds elapsed since the start of the recording, and then includes the floating point attribute values associated with the occurrence."
        },
        "otherData": {
          "bsonType": "array",
          "description": "The occurrences of the event type contained in this recording; consists of a 2D array of values, with one entry per occurrence. Each entry includes the non-float attribute values associated with the occurrence."
        }
      }
    }
  },
  "required": [
    "info",
    "frames"
  ]
}
